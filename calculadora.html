<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Ración BARF - BARF Ecuador</title>
    
    <!-- Tailwind CSS y Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #212529;
        }
        .nav-link {
            transition: color 0.3s ease-in-out;
        }
        .nav-link:hover {
            color: #A3B18A;
        }
        #result-container {
            transition: all 0.5s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Contenedor principal de la aplicación -->
    <div id="app-container">

        <!-- Header y Navegación (Consistente) -->
        <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
            <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="font-extrabold text-2xl text-[#3A5A40]">
                    <a href="index.html">BARF Ecuador</a>
                </div>
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="nav-link">Inicio</a>
                    <a href="producto.html" class="nav-link">El Producto</a>
                    <a href="modelo-negocio.html" class="nav-link">Modelo de Negocio</a>
                    <a href="regulacion.html" class="nav-link">Regulación</a>
                    <a href="calculadora.html" class="nav-link font-semibold text-[#588157]">Calculadora</a>
                    <a href="contacto.html" class="bg-[#588157] text-white px-4 py-2 rounded-md hover:bg-[#3A5A40] transition-colors">Contacto</a>
                </nav>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-[#3A5A40] focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
            <!-- Menú Móvil -->
            <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg">
                <a href="index.html" class="block py-2 px-4 text-sm hover:bg-gray-100">Inicio</a>
                <a href="producto.html" class="block py-2 px-4 text-sm hover:bg-gray-100">El Producto</a>
                <a href="modelo-negocio.html" class="block py-2 px-4 text-sm hover:bg-gray-100">Modelo de Negocio</a>
                <a href="regulacion.html" class="block py-2 px-4 text-sm hover:bg-gray-100">Regulación</a>
                <a href="calculadora.html" class="block py-2 px-4 text-sm hover:bg-gray-100 font-semibold text-[#588157]">Calculadora</a>
                <a href="contacto.html" class="block py-2 px-4 text-sm hover:bg-gray-100">Contacto</a>
            </div>
        </header>

        <!-- Contenido Principal -->
        <main>
            
            <!-- Sección de Introducción a la Calculadora -->
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-3xl lg:text-5xl font-extrabold text-[#3A5A40] mb-4">Calcule la Ración Diaria Ideal</h1>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                        Nuestra herramienta utiliza los principios de la nutrición BARF para estimar la cantidad de alimento diario que su mascota necesita, basado en sus características únicas. Obtenga una recomendación personalizada en segundos.
                    </p>
                </div>
            </section>

            <!-- Sección de la Calculadora -->
            <section class="py-20 bg-gray-50">
                <div class="container mx-auto px-6">
                    <div class="bg-white max-w-4xl mx-auto p-8 rounded-xl shadow-2xl grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
                        <!-- Columna del Formulario -->
                        <div>
                            <h2 class="text-2xl font-bold text-[#3A5A40] mb-6">Ingrese los datos de su mascota</h2>
                            <form id="barf-calculator-form" class="space-y-5">
                                <div>
                                    <label for="peso" class="block font-semibold mb-2 text-gray-700">1. Peso (en kilogramos)</label>
                                    <input type="text" id="peso" name="peso" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#588157] focus:outline-none" placeholder="Ej: 15.5">
                                </div>
                                <div>
                                    <label for="edad" class="block font-semibold mb-2 text-gray-700">2. Edad (en meses)</label>
                                    <input type="text" id="edad" name="edad" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#588157] focus:outline-none" placeholder="Ej: 24 (para 2 años)">
                                </div>
                                <div>
                                    <label for="actividad" class="block font-semibold mb-2 text-gray-700">3. Nivel de Actividad</label>
                                    <select id="actividad" name="actividad" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#588157] focus:outline-none bg-white">
                                        <option value="normal" selected>Normal (Paseos diarios)</option>
                                        <option value="alta">Alta (Deportista, muy activo)</option>
                                        <option value="baja">Baja (Sedentario, senior, sobrepeso)</option>
                                    </select>
                                    <p class="text-xs text-gray-500 mt-1">Este ajuste es más significativo en perros adultos (>12 meses).</p>
                                </div>
                                <div class="pt-4">
                                    <button type="submit" class="w-full bg-[#588157] text-white font-bold py-4 px-4 rounded-lg text-lg hover:bg-[#3A5A40] transition-colors duration-300 transform hover:scale-105">
                                        Calcular Ración
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Columna de Resultados -->
                        <div class="bg-gray-50 rounded-lg p-8 flex flex-col justify-center items-center text-center">
                            <div id="result-container">
                                <!-- El contenido del resultado se insertará aquí -->
                                <div id="initial-message">
                                    <svg class="w-20 h-20 text-gray-300 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                                    <h3 class="text-xl font-semibold text-gray-500 mt-4">El resultado aparecerá aquí</h3>
                                    <p class="text-gray-400 mt-2">Complete el formulario para obtener su recomendación personalizada.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer (Consistente) -->
        <footer class="bg-[#3A5A40] text-white">
            <div class="container mx-auto px-6 py-8 text-center">
                <p>&copy; 2025 BARF Ecuador. Todos los derechos reservados.</p>
                <p class="text-sm text-gray-300 mt-2">Un Prospecto de Inversión</p>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script>
        // Menú móvil
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Lógica de la calculadora
        const calculatorForm = document.getElementById('barf-calculator-form');
        const resultContainer = document.getElementById('result-container');

        const calcularRacionBarf = (pesoKg, edadMeses, actividad) => {
            const peso = parseFloat(pesoKg);
            const edad = parseInt(edadMeses, 10);

            if (isNaN(peso) || isNaN(edad) || peso <= 0 || edad <= 0) {
                return { error: "Por favor, ingrese valores numéricos válidos y positivos para peso y edad." };
            }

            let porcentaje;
            if (edad <= 2) porcentaje = 0.10;
            else if (edad <= 4) porcentaje = 0.08;
            else if (edad <= 6) porcentaje = 0.06;
            else if (edad <= 8) porcentaje = 0.04;
            else if (edad <= 12) porcentaje = 0.03;
            else { // Adultos
                porcentaje = 0.025; // Normal
                if (actividad === "alta") porcentaje = 0.03;
                if (actividad === "baja") porcentaje = 0.02;
            }

            const racionDiariaGramos = Math.round((peso * porcentaje) * 1000);
            return { racion: racionDiariaGramos };
        };
        
        const displayResult = ({ racion, error }) => {
            resultContainer.style.opacity = 0;
            setTimeout(() => {
                if (error) {
                    resultContainer.innerHTML = `
                        <div class="p-4 bg-red-100 border border-red-300 rounded-lg">
                            <h3 class="font-bold text-red-800">Error de Cálculo</h3>
                            <p class="text-sm text-red-700 mt-2">${error}</p>
                        </div>`;
                } else {
                    resultContainer.innerHTML = `
                        <h3 class="text-xl font-semibold text-gray-700">Ración Diaria Recomendada:</h3>
                        <p class="text-6xl font-extrabold text-[#3A5A40] my-2">${racion}<span class="text-4xl font-semibold">g</span></p>
                        <p class="text-gray-600">Divida esta cantidad en 2 o 3 comidas a lo largo del día.</p>
                        <a href="producto.html" class="mt-6 inline-block bg-[#A3B18A] text-[#3A5A40] font-bold py-2 px-6 rounded-full hover:bg-[#3A5A40] hover:text-white transition-colors duration-300">
                            Ver Nuestras Fórmulas
                        </a>`;
                }
                resultContainer.style.opacity = 1;
            }, 300);
        };

        calculatorForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(calculatorForm);
            const peso = formData.get('peso');
            const edad = formData.get('edad');
            const actividad = formData.get('actividad');

            const result = calcularRacionBarf(peso, edad, actividad);
            displayResult(result);
        });
    </script>
</body>
</html>
